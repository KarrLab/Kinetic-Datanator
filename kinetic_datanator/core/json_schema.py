from kinetic_datanator.core import models
import pprint as pp
from alchemyjsonschema import SchemaFactory
from alchemyjsonschema import StructuralWalker

from alchemyjsonschema import ForeignKeyWalker
from alchemyjsonschema import NoForeignKeyWalker
import sqlalchemy

import json
class mydict(dict):
    def __str__(self):
        return json.dumps(self)

def title_properties(an_object):
    for thing in an_object['properties']:
        an_object['properties'][thing]["title"] = thing
    return(an_object)

def remove_id(an_object):
    if "required" in an_object:
        del an_object["required"]
    if "required" in an_object['properties']:
        del an_object['properties']["required"]
    return(an_object)

def listify_properties(parent_object_name, an_object):
    parent_object_type = models.__dict__[parent_object_name]
    for thing in an_object['properties']:
        if (type(getattr(parent_object_type(), thing)) is sqlalchemy.orm.collections.InstrumentedList):
            print(thing)
            if "$ref" in an_object['properties'][thing]:
                initial_object = an_object['properties'][thing]
                new_object = {"type": "array", "items": {"$ref": initial_object["$ref"]}, "title": initial_object["title"]}
                an_object['properties'][thing] = new_object

    return(an_object)



def get_json_schema(data_type):

    factory = SchemaFactory(StructuralWalker)


    a_dict = mydict(factory(models.__dict__[data_type]))

    #_dict = {"properties": {"accession_number": {"title": "accession_number", "type": "string"}, "exp_name": {"title": "exp_name", "type": "string"}, "has_fastq_files": {"title": "has_fastq_files", "type": "boolean"}, "samples": {"title": "samples", "type": "array", "items": {"$ref": "#/definitions/RNASeqDataSet"}}, "_experimentmetadata": {"title": "_experimentmetadata", "type": "array", "items": {"$ref": "#/definitions/ExperimentMetadata"}}}, "type": "object", "title": "RNASeqExperiment", "definitions": {"ExperimentMetadata": {"properties": {"name": {"maxLength": 255, "type": "string", "title": "name"}, "id": {"title": "id", "type": "integer"}, "description": {"title": "description", "type": "string"}, "method": {"title": "method", "type": "array", "items": {"$ref": "#/definitions/Method"}}, "taxon": {"title": "taxon", "type": "array", "items": {"$ref": "#/definitions/Taxon"}}, "experiment_design": {"title": "experiment_design", "type": "array", "items": {"$ref": "#/definitions/ExperimentDesign"}}, "experiment_type": {"title": "experiment_type", "type": "array", "items": {"$ref": "#/definitions/ExperimentType"}}, "resource": {"title": "resource", "type": "array", "items": {"$ref": "#/definitions/Resource"}}}, "type": "object", "title": "ExperimentMetadata", "required": ["id"]}, "Conditions": {"properties": {"id": {"title": "id", "type": "integer"}, "growth_status": {"maxLength": 255, "type": "string", "title": "growth_status"}, "media": {"maxLength": 255, "type": "string", "title": "media"}, "temperature": {"title": "temperature", "type": "number"}, "ph": {"title": "ph", "type": "number"}, "growth_system": {"maxLength": 255, "type": "string", "title": "growth_system"}}, "type": "object", "title": "Conditions", "required": ["id"]}, "Characteristic": {"properties": {"id": {"title": "id", "type": "integer"}, "category": {"maxLength": 255, "type": "string", "title": "category"}, "value": {"maxLength": 255, "type": "string", "title": "value"}}, "type": "object", "title": "Characteristic", "required": ["id"]}, "ReferenceGenome": {"properties": {"namespace": {"maxLength": 255, "type": "string", "title": "namespace"}, "organism_strain": {"maxLength": 255, "type": "string", "title": "organism_strain"}, "download_url": {"maxLength": 255, "type": "string", "title": "download_url"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "ReferenceGenome", "required": []}, "Reaction": {"properties": {"reaction_id": {"title": "reaction_id", "type": "integer"}, "coefficient": {"title": "coefficient", "type": "number"}, "_is_reactant": {"title": "_is_reactant", "type": "boolean"}, "_is_product": {"title": "_is_product", "type": "boolean"}, "_is_modifier": {"title": "_is_modifier", "type": "boolean"}, "rxn_type": {"maxLength": 255, "type": "string", "title": "rxn_type"}, "compound": {"title": "compound", "type": "array", "items": {"$ref": "#/definitions/Compound"}}, "kinetic_law": {"title": "kinetic_law", "type": "array", "items": {"$ref": "#/definitions/KineticLaw"}}}, "type": "object", "title": "Reaction", "required": ["reaction_id"]}, "ExperimentType": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}}, "type": "object", "title": "ExperimentType", "required": ["id"]}, "Taxon": {"properties": {"ncbi_id": {"title": "ncbi_id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "Taxon", "required": ["ncbi_id"]}, "Metadata": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}, "taxon": {"title": "taxon", "type": "array", "items": {"$ref": "#/definitions/Taxon"}}, "method": {"title": "method", "type": "array", "items": {"$ref": "#/definitions/Method"}}, "cell_line": {"title": "cell_line", "type": "array", "items": {"$ref": "#/definitions/CellLine"}}, "synonym": {"title": "synonym", "type": "array", "items": {"$ref": "#/definitions/Synonym"}}, "conditions": {"title": "conditions", "type": "array", "items": {"$ref": "#/definitions/Conditions"}}, "cell_compartment": {"title": "cell_compartment", "type": "array", "items": {"$ref": "#/definitions/CellCompartment"}}, "characteristic": {"title": "characteristic", "type": "array", "items": {"$ref": "#/definitions/Characteristic"}}, "variable": {"title": "variable", "type": "array", "items": {"$ref": "#/definitions/Variable"}}}, "type": "object", "title": "Metadata", "required": ["id"]}, "Compound": {"properties": {"compound_name": {"maxLength": 255, "type": "string", "title": "compound_name"}, "description": {"maxLength": 255, "type": "string", "title": "description"}, "comment": {"maxLength": 255, "type": "string", "title": "comment"}, "_is_name_ambiguous": {"title": "_is_name_ambiguous", "type": "boolean"}, "structure": {"title": "structure", "type": "array", "items": {"$ref": "#/definitions/Structure"}}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}, "reaction": {"title": "reaction", "type": "array", "items": {"$ref": "#/definitions/Reaction"}}, "concentration": {"title": "concentration", "type": "array", "items": {"$ref": "#/definitions/Concentration"}}}, "type": "object", "title": "Compound", "required": []}, "Synonym": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}}, "type": "object", "title": "Synonym", "required": ["id"]}, "Experiment": {"properties": {"id": {"title": "id", "type": "integer"}}, "type": "object", "title": "Experiment", "required": ["id"]}, "Method": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}, "comments": {"maxLength": 255, "type": "string", "title": "comments"}, "performer": {"maxLength": 255, "type": "string", "title": "performer"}, "hardware": {"maxLength": 255, "type": "string", "title": "hardware"}, "software": {"maxLength": 255, "type": "string", "title": "software"}, "_experimentmetadata": {"title": "_experimentmetadata", "type": "array", "items": {"$ref": "#/definitions/ExperimentMetadata"}}}, "type": "object", "title": "Method", "required": ["id"]}, "CellCompartment": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}, "reaction": {"title": "reaction", "type": "array", "items": {"$ref": "#/definitions/Reaction"}}}, "type": "object", "title": "CellCompartment", "required": ["id"]}, "RNASeqDataSet": {"properties": {"experiment_accession_number": {"title": "experiment_accession_number", "type": "string"}, "sample_name": {"title": "sample_name", "type": "string"}, "assay": {"title": "assay", "type": "string"}, "ensembl_organism_strain": {"title": "ensembl_organism_strain", "type": "string"}, "read_type": {"title": "read_type", "type": "string"}, "full_strain_specificity": {"title": "full_strain_specificity", "type": "boolean"}, "reference_genome": {"title": "reference_genome", "type": "array", "items": {"$ref": "#/definitions/ReferenceGenome"}}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "RNASeqDataSet", "required": []}, "Variable": {"properties": {"id": {"title": "id", "type": "integer"}, "category": {"maxLength": 255, "type": "string", "title": "category"}, "value": {"maxLength": 255, "type": "string", "title": "value"}, "units": {"maxLength": 255, "type": "string", "title": "units"}}, "type": "object", "title": "Variable", "required": ["id"]}, "Structure": {"properties": {"_value_smiles": {"maxLength": 255, "type": "string", "title": "_value_smiles"}, "_value_inchi": {"maxLength": 255, "type": "string", "title": "_value_inchi"}, "_structure_formula_connectivity": {"maxLength": 255, "type": "string", "title": "_structure_formula_connectivity"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "Structure", "required": []}, "ExperimentDesign": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}}, "type": "object", "title": "ExperimentDesign", "required": ["id"]}, "CellLine": {"properties": {"id": {"title": "id", "type": "integer"}, "name": {"maxLength": 255, "type": "string", "title": "name"}}, "type": "object", "title": "CellLine", "required": ["id"]}, "ProteinSubunit": {"properties": {"subunit_name": {"maxLength": 255, "type": "string", "title": "subunit_name"}, "uniprot_id": {"maxLength": 255, "type": "string", "title": "uniprot_id"}, "entrez_id": {"title": "entrez_id", "type": "integer"}, "ec_number": {"maxLength": 255, "type": "string", "title": "ec_number"}, "gene_name": {"maxLength": 255, "type": "string", "title": "gene_name"}, "gene_syn": {"maxLength": 255, "type": "string", "title": "gene_syn"}, "class_name": {"maxLength": 255, "type": "string", "title": "class_name"}, "family_name": {"maxLength": 255, "type": "string", "title": "family_name"}, "coefficient": {"title": "coefficient", "type": "integer"}, "canonical_sequence": {"maxLength": 255, "type": "string", "title": "canonical_sequence"}, "mass": {"title": "mass", "type": "integer"}, "length": {"title": "length", "type": "integer"}, "molecular_weight": {"title": "molecular_weight", "type": "number"}, "pax_load": {"title": "pax_load", "type": "integer"}, "uniprot_checked": {"title": "uniprot_checked", "type": "boolean"}, "proteincomplex": {"title": "proteincomplex", "type": "array", "items": {"$ref": "#/definitions/ProteinComplex"}}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "ProteinSubunit", "required": []}, "Parameter": {"properties": {"parameter_id": {"title": "parameter_id", "type": "integer"}, "sabio_type": {"title": "sabio_type", "type": "integer"}, "value": {"title": "value", "type": "number"}, "error": {"title": "error", "type": "number"}, "units": {"maxLength": 255, "type": "string", "title": "units"}, "observed_name": {"maxLength": 255, "type": "string", "title": "observed_name"}, "observed_sabio_type": {"title": "observed_sabio_type", "type": "integer"}, "observed_value": {"title": "observed_value", "type": "number"}, "observed_error": {"title": "observed_error", "type": "number"}, "observed_units": {"maxLength": 255, "type": "string", "title": "observed_units"}, "compound": {"title": "compound", "type": "array", "items": {"$ref": "#/definitions/Compound"}}}, "type": "object", "title": "Parameter", "required": ["parameter_id"]}, "ProteinComplex": {"properties": {"complex_name": {"maxLength": 255, "type": "string", "title": "complex_name"}, "go_id": {"maxLength": 255, "type": "string", "title": "go_id"}, "go_dsc": {"maxLength": 255, "type": "string", "title": "go_dsc"}, "funcat_id": {"maxLength": 255, "type": "string", "title": "funcat_id"}, "funcat_dsc": {"maxLength": 255, "type": "string", "title": "funcat_dsc"}, "su_cmt": {"maxLength": 255, "type": "string", "title": "su_cmt"}, "complex_cmt": {"maxLength": 255, "type": "string", "title": "complex_cmt"}, "disease_cmt": {"maxLength": 255, "type": "string", "title": "disease_cmt"}, "class_name": {"maxLength": 255, "type": "string", "title": "class_name"}, "family_name": {"maxLength": 255, "type": "string", "title": "family_name"}, "molecular_weight": {"title": "molecular_weight", "type": "number"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}, "protein_subunit": {"title": "protein_subunit", "type": "array", "items": {"$ref": "#/definitions/ProteinSubunit"}}, "dna_binding_dataset": {"title": "dna_binding_dataset", "type": "array", "items": {"$ref": "#/definitions/DNABindingDataset"}}}, "type": "object", "title": "ProteinComplex", "required": []}, "Concentration": {"properties": {"value": {"title": "value", "type": "number"}, "error": {"title": "error", "type": "number"}, "units": {"maxLength": 255, "type": "string", "title": "units"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "Concentration", "required": []}, "DNABindingDataset": {"properties": {"version": {"title": "version", "type": "integer"}, "subunit": {"title": "subunit", "type": "array", "items": {"$ref": "#/definitions/ProteinSubunit"}}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}, "dna_binding_data": {"title": "dna_binding_data", "type": "array", "items": {"$ref": "#/definitions/DNABindingData"}}}, "type": "object", "title": "DNABindingDataset", "required": []}, "Resource": {"properties": {"id": {"title": "id", "type": "integer"}, "namespace": {"maxLength": 255, "type": "string", "title": "namespace"}, "_id": {"maxLength": 255, "type": "string", "title": "_id"}, "release_date": {"maxLength": 255, "type": "string", "title": "release_date"}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}}, "type": "object", "title": "Resource", "required": ["id"]}, "KineticLaw": {"properties": {"enzyme_type": {"maxLength": 255, "type": "string", "title": "enzyme_type"}, "tissue": {"maxLength": 255, "type": "string", "title": "tissue"}, "mechanism": {"maxLength": 255, "type": "string", "title": "mechanism"}, "equation": {"maxLength": 255, "type": "string", "title": "equation"}, "enzyme": {"title": "enzyme", "type": "array", "items": {"$ref": "#/definitions/ProteinComplex"}}, "_metadata": {"title": "_metadata", "type": "array", "items": {"$ref": "#/definitions/Metadata"}}, "parameter": {"title": "parameter", "type": "array", "items": {"$ref": "#/definitions/Parameter"}}}, "type": "object", "title": "KineticLaw", "required": []}, "DNABindingData": {"properties": {"position_id": {"title": "position_id", "type": "integer"}, "position": {"title": "position", "type": "integer"}, "frequency_a": {"title": "frequency_a", "type": "integer"}, "frequency_c": {"title": "frequency_c", "type": "integer"}, "frequency_g": {"title": "frequency_g", "type": "integer"}, "frequency_t": {"title": "frequency_t", "type": "integer"}, "jaspar_id": {"title": "jaspar_id", "type": "integer"}}, "type": "object", "title": "DNABindingData", "required": ["position_id"]}}}

    a_dict = title_properties(a_dict)
    a_dict = listify_properties("RNASeqExperiment", a_dict)
    a_dict = remove_id(a_dict)

    if 'definitions' in a_dict:
        for definition in a_dict['definitions']:
            #print(a_dict['definitions'][definition])
            #print(remove_id(a_dict['definitions'][definition]))
            a_dict['definitions'][definition]["title"] = definition
            a_dict['definitions'][definition] = title_properties(a_dict['definitions'][definition])
            a_dict['definitions'][definition] = listify_properties(definition, a_dict['definitions'][definition])
            a_dict['definitions'][definition] = remove_id(a_dict['definitions'][definition])
            #print(a_dict['definitions'][definition])


    a_dict = mydict(a_dict)
    return a_dict

def add_object_names(json_schema, a_json):
    pass

if __name__ == '__main__':
    schema = get_json_schema('RNASeqExperiment')


    #print(remove_id({'properties': {'name': {'title': 'name', 'type': 'string', 'maxLength': 255}, 'id': {'type': 'integer', 'title': 'id'}}, 'title': 'CellLine', 'required': ['id'], 'type': 'object'}))


    #test_schema = {"title": "RNASeqExperiment", "properties": {"accession_number": {"title": "accession_number", "type": "string"}, "exp_name": {"title": "exp_name", "type": "string"}, "has_fastq_files": {"title": "has_fastq_files", "type": "boolean"}, "samples": {"title": "samples", "items": {"$ref": "#/definitions/RNASeqDataSet"}, "type": "array"}, "_experimentmetadata": {"title": "_experimentmetadata", "items": {"$ref": "#/definitions/ExperimentMetadata"}, "type": "array"}}, "definitions": {"KineticLaw": {"title": "KineticLaw", "properties": {"enzyme_type": {"title": "enzyme_type", "maxLength": 255, "type": "string"}, "tissue": {"title": "tissue", "maxLength": 255, "type": "string"}, "mechanism": {"title": "mechanism", "maxLength": 255, "type": "string"}, "equation": {"title": "equation", "maxLength": 255, "type": "string"}, "enzyme": {"title": "enzyme", "items": {"$ref": "#/definitions/ProteinComplex"}, "type": "array"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}, "parameter": {"title": "parameter", "items": {"$ref": "#/definitions/Parameter"}, "type": "array"}}, "type": "object"}, "ProteinComplex": {"title": "ProteinComplex", "properties": {"complex_name": {"title": "complex_name", "maxLength": 255, "type": "string"}, "go_id": {"title": "go_id", "maxLength": 255, "type": "string"}, "go_dsc": {"title": "go_dsc", "maxLength": 255, "type": "string"}, "funcat_id": {"title": "funcat_id", "maxLength": 255, "type": "string"}, "funcat_dsc": {"title": "funcat_dsc", "maxLength": 255, "type": "string"}, "su_cmt": {"title": "su_cmt", "maxLength": 255, "type": "string"}, "complex_cmt": {"title": "complex_cmt", "maxLength": 255, "type": "string"}, "disease_cmt": {"title": "disease_cmt", "maxLength": 255, "type": "string"}, "class_name": {"title": "class_name", "maxLength": 255, "type": "string"}, "family_name": {"title": "family_name", "maxLength": 255, "type": "string"}, "molecular_weight": {"title": "molecular_weight", "type": "number"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}, "protein_subunit": {"title": "protein_subunit", "items": {"$ref": "#/definitions/ProteinSubunit"}, "type": "array"}, "dna_binding_dataset": {"title": "dna_binding_dataset", "items": {"$ref": "#/definitions/DNABindingDataset"}, "type": "array"}}, "type": "object"}, "Compound": {"title": "Compound", "properties": {"compound_name": {"title": "compound_name", "maxLength": 255, "type": "string"}, "description": {"title": "description", "maxLength": 255, "type": "string"}, "comment": {"title": "comment", "maxLength": 255, "type": "string"}, "_is_name_ambiguous": {"title": "_is_name_ambiguous", "type": "boolean"}, "structure": {"title": "structure", "items": {"$ref": "#/definitions/Structure"}, "type": "array"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}, "reaction": {"title": "reaction", "items": {"$ref": "#/definitions/Reaction"}, "type": "array"}, "concentration": {"title": "concentration", "items": {"$ref": "#/definitions/Concentration"}, "type": "array"}}, "type": "object"}, "Synonym": {"title": "Synonym", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}}, "type": "object"}, "CellCompartment": {"title": "CellCompartment", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}, "reaction": {"title": "reaction", "items": {"$ref": "#/definitions/Reaction"}, "type": "array"}}, "type": "object"}, "RNASeqDataSet": {"title": "RNASeqDataSet", "properties": {"experiment_accession_number": {"title": "experiment_accession_number", "type": "string"}, "sample_name": {"title": "sample_name", "type": "string"}, "assay": {"title": "assay", "type": "string"}, "ensembl_organism_strain": {"title": "ensembl_organism_strain", "type": "string"}, "read_type": {"title": "read_type", "type": "string"}, "full_strain_specificity": {"title": "full_strain_specificity", "type": "boolean"}, "reference_genome": {"title": "reference_genome", "items": {"$ref": "#/definitions/ReferenceGenome"}, "type": "array"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "DNABindingDataset": {"title": "DNABindingDataset", "properties": {"version": {"title": "version", "type": "integer"}, "subunit": {"title": "subunit", "items": {"$ref": "#/definitions/ProteinSubunit"}, "type": "array"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}, "dna_binding_data": {"title": "dna_binding_data", "items": {"$ref": "#/definitions/DNABindingData"}, "type": "array"}}, "type": "object"}, "Conditions": {"title": "Conditions", "properties": {"id": {"title": "id", "type": "integer"}, "growth_status": {"title": "growth_status", "maxLength": 255, "type": "string"}, "media": {"title": "media", "maxLength": 255, "type": "string"}, "temperature": {"title": "temperature", "type": "number"}, "ph": {"title": "ph", "type": "number"}, "growth_system": {"title": "growth_system", "maxLength": 255, "type": "string"}}, "type": "object"}, "ExperimentType": {"title": "ExperimentType", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}}, "type": "object"}, "ProteinSubunit": {"title": "ProteinSubunit", "properties": {"subunit_name": {"title": "subunit_name", "maxLength": 255, "type": "string"}, "uniprot_id": {"title": "uniprot_id", "maxLength": 255, "type": "string"}, "entrez_id": {"title": "entrez_id", "type": "integer"}, "ec_number": {"title": "ec_number", "maxLength": 255, "type": "string"}, "gene_name": {"title": "gene_name", "maxLength": 255, "type": "string"}, "gene_syn": {"title": "gene_syn", "maxLength": 255, "type": "string"}, "class_name": {"title": "class_name", "maxLength": 255, "type": "string"}, "family_name": {"title": "family_name", "maxLength": 255, "type": "string"}, "coefficient": {"title": "coefficient", "type": "integer"}, "canonical_sequence": {"title": "canonical_sequence", "maxLength": 255, "type": "string"}, "mass": {"title": "mass", "type": "integer"}, "length": {"title": "length", "type": "integer"}, "molecular_weight": {"title": "molecular_weight", "type": "number"}, "pax_load": {"title": "pax_load", "type": "integer"}, "uniprot_checked": {"title": "uniprot_checked", "type": "boolean"}, "proteincomplex": {"title": "proteincomplex", "items": {"$ref": "#/definitions/ProteinComplex"}, "type": "array"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "ExperimentDesign": {"title": "ExperimentDesign", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}}, "type": "object"}, "Concentration": {"title": "Concentration", "properties": {"value": {"title": "value", "type": "number"}, "error": {"title": "error", "type": "number"}, "units": {"title": "units", "maxLength": 255, "type": "string"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "DNABindingData": {"title": "DNABindingData", "properties": {"position_id": {"title": "position_id", "type": "integer"}, "position": {"title": "position", "type": "integer"}, "frequency_a": {"title": "frequency_a", "type": "integer"}, "frequency_c": {"title": "frequency_c", "type": "integer"}, "frequency_g": {"title": "frequency_g", "type": "integer"}, "frequency_t": {"title": "frequency_t", "type": "integer"}, "jaspar_id": {"title": "jaspar_id", "type": "integer"}}, "type": "object"}, "Method": {"title": "Method", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}, "comments": {"title": "comments", "maxLength": 255, "type": "string"}, "performer": {"title": "performer", "maxLength": 255, "type": "string"}, "hardware": {"title": "hardware", "maxLength": 255, "type": "string"}, "software": {"title": "software", "maxLength": 255, "type": "string"}, "_experimentmetadata": {"title": "_experimentmetadata", "items": {"$ref": "#/definitions/ExperimentMetadata"}, "type": "array"}}, "type": "object"}, "Parameter": {"title": "Parameter", "properties": {"parameter_id": {"title": "parameter_id", "type": "integer"}, "sabio_type": {"title": "sabio_type", "type": "integer"}, "value": {"title": "value", "type": "number"}, "error": {"title": "error", "type": "number"}, "units": {"title": "units", "maxLength": 255, "type": "string"}, "observed_name": {"title": "observed_name", "maxLength": 255, "type": "string"}, "observed_sabio_type": {"title": "observed_sabio_type", "type": "integer"}, "observed_value": {"title": "observed_value", "type": "number"}, "observed_error": {"title": "observed_error", "type": "number"}, "observed_units": {"title": "observed_units", "maxLength": 255, "type": "string"}, "compound": {"title": "compound", "items": {"$ref": "#/definitions/Compound"}, "type": "array"}}, "type": "object"}, "Resource": {"title": "Resource", "properties": {"id": {"title": "id", "type": "integer"}, "namespace": {"title": "namespace", "maxLength": 255, "type": "string"}, "_id": {"title": "_id", "maxLength": 255, "type": "string"}, "release_date": {"title": "release_date", "maxLength": 255, "type": "string"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "Experiment": {"title": "Experiment", "properties": {"id": {"title": "id", "type": "integer"}}, "type": "object"}, "Taxon": {"title": "Taxon", "properties": {"ncbi_id": {"title": "ncbi_id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "CellLine": {"title": "CellLine", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}}, "type": "object"}, "Characteristic": {"title": "Characteristic", "properties": {"id": {"title": "id", "type": "integer"}, "category": {"title": "category", "maxLength": 255, "type": "string"}, "value": {"title": "value", "maxLength": 255, "type": "string"}}, "type": "object"}, "Variable": {"title": "Variable", "properties": {"id": {"title": "id", "type": "integer"}, "category": {"title": "category", "maxLength": 255, "type": "string"}, "value": {"title": "value", "maxLength": 255, "type": "string"}, "units": {"title": "units", "maxLength": 255, "type": "string"}}, "type": "object"}, "ExperimentMetadata": {"title": "ExperimentMetadata", "properties": {"name": {"title": "name", "maxLength": 255, "type": "string"}, "id": {"title": "id", "type": "integer"}, "description": {"title": "description", "type": "string"}, "method": {"title": "method", "items": {"$ref": "#/definitions/Method"}, "type": "array"}, "taxon": {"title": "taxon", "items": {"$ref": "#/definitions/Taxon"}, "type": "array"}, "experiment_design": {"title": "experiment_design", "items": {"$ref": "#/definitions/ExperimentDesign"}, "type": "array"}, "experiment_type": {"title": "experiment_type", "items": {"$ref": "#/definitions/ExperimentType"}, "type": "array"}, "resource": {"title": "resource", "items": {"$ref": "#/definitions/Resource"}, "type": "array"}}, "type": "object"}, "ReferenceGenome": {"title": "ReferenceGenome", "properties": {"namespace": {"title": "namespace", "maxLength": 255, "type": "string"}, "organism_strain": {"title": "organism_strain", "maxLength": 255, "type": "string"}, "download_url": {"title": "download_url", "maxLength": 255, "type": "string"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}, "Metadata": {"title": "Metadata", "properties": {"id": {"title": "id", "type": "integer"}, "name": {"title": "name", "maxLength": 255, "type": "string"}, "taxon": {"title": "taxon", "items": {"$ref": "#/definitions/Taxon"}, "type": "array"}, "method": {"title": "method", "items": {"$ref": "#/definitions/Method"}, "type": "array"}, "cell_line": {"title": "cell_line", "items": {"$ref": "#/definitions/CellLine"}, "type": "array"}, "synonym": {"title": "synonym", "items": {"$ref": "#/definitions/Synonym"}, "type": "array"}, "conditions": {"title": "conditions", "items": {"$ref": "#/definitions/Conditions"}, "type": "array"}, "cell_compartment": {"title": "cell_compartment", "items": {"$ref": "#/definitions/CellCompartment"}, "type": "array"}, "characteristic": {"title": "characteristic", "items": {"$ref": "#/definitions/Characteristic"}, "type": "array"}, "variable": {"title": "variable", "items": {"$ref": "#/definitions/Variable"}, "type": "array"}}, "type": "object"}, "Reaction": {"title": "Reaction", "properties": {"reaction_id": {"title": "reaction_id", "type": "integer"}, "coefficient": {"title": "coefficient", "type": "number"}, "_is_reactant": {"title": "_is_reactant", "type": "boolean"}, "_is_product": {"title": "_is_product", "type": "boolean"}, "_is_modifier": {"title": "_is_modifier", "type": "boolean"}, "rxn_type": {"title": "rxn_type", "maxLength": 255, "type": "string"}, "compound": {"title": "compound", "items": {"$ref": "#/definitions/Compound"}, "type": "array"}, "kinetic_law": {"title": "kinetic_law", "items": {"$ref": "#/definitions/KineticLaw"}, "type": "array"}}, "type": "object"}, "Structure": {"title": "Structure", "properties": {"_value_smiles": {"title": "_value_smiles", "maxLength": 255, "type": "string"}, "_value_inchi": {"title": "_value_inchi", "maxLength": 255, "type": "string"}, "_structure_formula_connectivity": {"title": "_structure_formula_connectivity", "maxLength": 255, "type": "string"}, "_metadata": {"title": "_metadata", "items": {"$ref": "#/definitions/Metadata"}, "type": "array"}}, "type": "object"}}, "type": "object"}
    #test_json = """"{"_experimentmetadata":[],"accession_number":"E-MTAB-3","exp_name":"test_experiment","has_fastq_files":true,"samples":[{"_metadata":[],"assay":"test_assay","ensembl_organism_strain":"test_strain","experiment_accession_number":"E-MTAB-3","full_strain_specificity":true,"read_type":"single","reference_genome":[{"_metadata":[],"namespace":"refseq","organism_strain":"test_strain"}],"sample_name":"test_sample"}]}"""

    #add_object_names(test_schema, test_json)
    #title_properties(test_schema)